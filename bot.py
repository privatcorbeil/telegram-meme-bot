import os
import random
from telegram import Update, InputFile, ReplyKeyboardMarkup
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes
from dotenv import load_dotenv

load_dotenv()
BOT_TOKEN = os.getenv("BOT_TOKEN")

MEME_FOLDER = "memes"

# –°–ø–∏—Å–æ–∫ –¥—ñ–π
actions = [
    "–ù–∞–ø–∏—à–∏ —Å–µ—Ä–π–æ–∑–Ω–µ –∑—ñ–∑–Ω–∞–Ω–Ω—è –Ω–∞ —Å—Ç–∏–∫–µ—Ä—ñ –π –∑–∞–ª–∏—à –π–æ–≥–æ –Ω–∞ –¥–∑–µ—Ä–∫–∞–ª—ñ –≤ —Ç—É–∞–ª–µ—Ç—ñ.",
    "–ó–∞–ø–∏—Ç–∞–π —É –Ω–µ–∑–Ω–∞–π–æ–º—Ü—è: '–Ø–∫ –¥—É–º–∞—î—à, —Å—å–æ–≥–æ–¥–Ω—ñ —Ö–æ—Ä–æ—à–∏–π –¥–µ–Ω—å, —â–æ–± –≤—Ç–µ–∫—Ç–∏ –≤ –¢—ñ–±–µ—Ç?'",
    "–ù–∞–∫–ª–µ–π –æ—á—ñ –Ω–∞ –±–∞–Ω–∞–Ω–∏ –≤ –º–∞–≥–∞–∑–∏–Ω—ñ. –•–∞–π —Ç—Ä–æ—Ö–∏ –ø–æ–∂–∏–≤—É—Ç—å.",
    "–°—Ñ–æ—Ç–∫–∞–π —Å–µ–±–µ –∑ —Å–µ—Ä–π–æ–∑–Ω–∏–º –æ–±–ª–∏—á—á—è–º –±—ñ–ª—è –º‚Äô—è—Å–∞: '–Ø –≤–∏–±—Ä–∞–ª–∞ —Ç–µ–±–µ'.",
    "–ü—Ä–æ–≥—É–ª—è–π—Å—è –∑ –Ω–∞–ø–∏—Å–æ–º: '–ü–∏—Ç–∞—é –¥–æ—Ä–æ–≥—É –ª–∏—à–µ –≤ –∫—ñ—à–æ–∫. –õ—é–¥—è–º –Ω–µ –¥–æ–≤—ñ—Ä—è—é.'",
    "–ü–æ—Å—Ç–∞–≤ —Ç–∞–π–º–µ—Ä —ñ –ø–æ—á–Ω–∏ —Ç–∞–Ω—Ü—é–≤–∞—Ç–∏, –¥–µ –± –Ω–µ –±—É–ª–∞.",
    "–ù–∞–ø–∏—à–∏ –∫–æ–º—É—Å—å '–¶–µ –∑–Ω–∞–∫' ‚Äî —ñ –∑–Ω–∏–∫–Ω–∏.",
    "–§–æ—Ç–æ –ª–æ–∂–∫–∏: '–ú—ñ–π –ø—Å–∏—Ö–æ–ª–æ–≥. –ó–∞–≤–∂–¥–∏ —Å–ª—É—Ö–∞—î.'",
    "–ì–æ–ª–æ—Å–æ–≤–µ –∑ —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—î—é ‚Äî –≥–æ–ª–æ—Å–æ–º –±—ñ–ª–∫–∏.",
    "–ü—Ä–æ—á–∏—Ç–∞–π –≤–∏–ø–∞–¥–∫–æ–≤—É —Ñ—Ä–∞–∑—É –∑ –∫–Ω–∏–∂–∫–∏ –≤ –º–∞—Ä—à—Ä—É—Ç—Ü—ñ.",
    "–ù–∞–º–∞–ª—é–π '–ø–æ—Ä—Ç–∞–ª –≤ —ñ–Ω—à–∏–π –≤–∏–º—ñ—Ä' –∫—Ä–µ–π–¥–æ—é.",
    "–§–µ–π–∫–æ–≤–µ —ñ–Ω—Ç–µ—Ä–≤‚Äô—é: '–©–æ —Å–∫–∞–∂–µ—Ç–µ –ø—Ä–æ –¥–µ–Ω—å –ª–∏–º–æ–Ω–∞?'",
    "–†–æ–∑–¥—Ä—É–∫—É–π –º–µ–º —ñ –Ω–∞–∫–ª–µ–π –Ω–∞ —Å—Ç–æ–≤–ø.",
    "–ó–∞–ø–∏—à–∏ TikTok: '–Ø ‚Äî —Ä–µ—ñ–Ω–∫–∞—Ä–Ω–∞—Ü—ñ—è –°—É–ø–µ—Ä–ú–∏–∫–∏—Ç–∏.'",
    "–ù–∞–ø–∏—à–∏ '–¶–µ –±—É–≤ –ª–∏—à–µ —Å–æ–Ω', –ø–æ—Ä–≤–∏ —ñ –≤—ñ–¥–¥–∞–π –ø–µ—Ä–µ—Ö–æ–∂–æ–º—É.",
    "–ü–æ–¥–∑–≤–æ–Ω–∏ –¥—Ä—É–≥—É: '–°–∫–∞–∂–∏ –∫–æ–¥–æ–≤–µ —Å–ª–æ–≤–æ ‚Äî –±–æ—Ä—â!'",
    "–û–ø–∏—Ç—É–≤–∞–Ω–Ω—è –≤ —ñ–Ω—Å—Ç—ñ: '–ë–æ–≥–∏–Ω—è —á–∏ –±—É–ª–æ—á–∫–∞?'",
    "–°—Ç–æ—Ä—ñ—Å –∑ –ø–∞—Ñ–æ—Å–æ–º: –Ω—ñ–±–∏ —Ç–∏ –Ω–∞ –û—Å–∫–∞—Ä—ñ.",
    "–ù–∞–¥—ñ—à–ª–∏ '–•–∞! –Ø –≤—Å–µ –∑–Ω–∞—é!' —ñ –º–æ–≤—á–∏.",
    "–ó–∞–∫—Ä–∏—á–∏: '–Ø –ª—é–±–ª—é –∂–∏—Ç—Ç—è, –Ω–∞–≤—ñ—Ç—å –∫—Ä—ñ–Ω–∂–æ–≤–µ!'",
    "–†–∏–ª—Å: '–ú—ñ–π —Ä–∞–Ω–æ–∫ —è–∫ —É –∫—ñ–Ω–æ', –∞ —Ç–∞–º –Ω–æ—Å–æ–∫.",
    "–ì–æ—Ä–æ—Å–∫–æ–ø, –Ω–∞—á–µ –≤–∏—Ä–æ–∫.",
    "–ù–∞–∑–≤–∏ —Å–≤–æ—é –ª–æ–∂–∫—É —ñ –ø–æ–≥–æ–≤–æ—Ä–∏ –∑ –Ω–µ—é.",
    "–§–æ—Ç–æ—Å–µ—Å—ñ—è –¥–ª—è –±—É—Ç–µ—Ä–±—Ä–æ–¥–∞. –ó —ñ–º‚Äô—è–º.",
    "–ë—É–¥–∏–ª—å–Ω–∏–∫ 17:07 ‚Äî —á–µ–∫–∞–π, —â–æ —Å—Ç–∞–Ω–µ—Ç—å—Å—è."
]

# –°–ø–∏—Å–æ–∫ –∞—Ñ—ñ—Ä–º–∞—Ü—ñ–π
affirmations = [
    "–ù–µ —á–µ–∫–∞–π –ø–æ–Ω–µ–¥—ñ–ª–∫–∞. –°–≤—ñ—Ç —Ä—è—Ç—É—é—Ç—å —É –ø‚Äô—è—Ç–Ω–∏—Ü—é –≤–≤–µ—á–µ—Ä—ñ.",
    "–†–æ–±–∏, —è–∫ —Ö–æ—á–µ—à. –ü–æ—Ç—ñ–º –±—É–¥–µ '—Ç–∞–∫ —ñ –ø–ª–∞–Ω—É–≤–∞–ª–æ—Å—å'.",
    "–¢–∏ –Ω–µ –≤—Ç–æ–º–∏–≤—Å—è ‚Äî —Ç–∏ –∑–∞—Ä—è–¥–∂–∞—î—à—Å—è. –Ø–∫ Wi-Fi –ø—ñ—Å–ª—è –≥—Ä–æ–∑–∏.",
    "–Ø–∫—â–æ —Å–≤—ñ—Ç –Ω–µ –ø—ñ–¥–∫–æ—Ä–∏–≤—Å—è ‚Äî –ø—ñ–¥–∫–æ—Ä —Å–µ–±–µ.",
    "–ì–æ–ª–æ–≤–Ω–µ –Ω–µ –∑–≥–æ—Ä—ñ—Ç–∏, –∞ —Å–≤—ñ—Ç–∏—Ç–∏.",
    "–ú–æ–∑–æ–∫ —Ö–æ—á–µ —Å–ø–∞—Ç–∏, —Å–µ—Ä—Ü–µ ‚Äî —Ä–µ–≤–æ–ª—é—Ü—ñ—ó. –û–±–∏—Ä–∞–π —Å–µ—Ä—Ü–µ.",
    "–ù–µ —à—É–∫–∞–π —Å–µ–±–µ. –°—Ç–≤–æ—Ä–∏ —Å–µ–±–µ.",
    "–¢–≤–æ—ó —Ñ–∞–∫–∞–ø–∏ ‚Äî —Ç—Ä–µ–π–ª–µ—Ä –¥–æ –∫—ñ–Ω–æ. –ù–µ –∑–ª–∏–≤–∞–π –ø—Ä–µ–º‚Äô—î—Ä—É.",
    "–ù–∞—Ç—Ö–Ω–µ–Ω–Ω—è ‚Äî —Ü–µ —Ç–∏ –≤ –∫–∞–ø—é—à–æ–Ω—ñ –∑ –º—É–∑–∏–∫–æ—é.",
    "–ú–æ–∂–Ω–∞ —á–µ–∫–∞—Ç–∏ –∑–Ω–∞–∫. –ê –º–æ–∂–Ω–∞ –±—É—Ç–∏ –Ω–∏–º.",
    "–ö–∞–∂–∏ '–∞ —â–æ, —è–∫–±–∏ —è –≤–∂–µ –∑—Ä–æ–±–∏–≤?'",
    "–°–µ–ª—Ñ—ñ, —â–æ–± –∑–≥–∞–¥–∞—Ç–∏, –∑–≤—ñ–¥–∫–∏ –ø–æ—á–∞–≤.",
    "–ó–∞–ª–∏—à —Ç—Ä–æ—Ö–∏ —Ö–∞–æ—Å—É ‚Äî —â–æ–± –±—É–ª–æ –∫—É–¥–∏ –ø—ñ–¥–∫–∏–¥–∞—Ç–∏ —ñ–¥–µ—ó.",
    "–°–≤—ñ—Ç –Ω–µ –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ç–≤–æ–≥–æ —Ä—ñ–≤–Ω—è –≤–æ–≥–Ω—é.",
    "–ù–∞—Ç–∏—Å–Ω–∏ 'play' –Ω–∞ —Å–æ–±—ñ.",
    "–ö–∞–∂–∏ '–≤–æ—É', –∞ –Ω–µ '–æ–π'.",
    "–ú–æ—Ç–∏–≤–∞—Ü—ñ—è ‚Äî —Ü–µ —Ç–∏ –≤ –¥–∑–µ—Ä–∫–∞–ª—ñ –∑ –æ—á–∏–º–∞ —Ç–∏–≥—Ä–∞."
]

keyboard = ReplyKeyboardMarkup(
    [["üñº –ú–µ–º –¥–Ω—è", "‚ö°Ô∏è –ù–µ –∂–¥–∏ ‚Äî –¥—ñ–π!"],
     ["üí¨ –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –¥–ª—è –¥—É—à—ñ", "ü§ù –ó–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤‚Äô—è–∑–æ–∫"]],
    resize_keyboard=True
)

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text("–ü—Ä–∏–≤—ñ—Ç! –Ø ‚Äî –ö–û–õ–ï–°–û –•–ê–£–°–£ üåÄ –û–±–µ—Ä–∏ –∫–Ω–æ–ø–∫—É:", reply_markup=keyboard)

async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text

    if text == "üñº –ú–µ–º –¥–Ω—è":
        meme_files = os.listdir(MEME_FOLDER)
        if meme_files:
            meme = random.choice(meme_files)
            with open(os.path.join(MEME_FOLDER, meme), "rb") as f:
                await update.message.reply_photo(photo=InputFile(f))
        else:
            await update.message.reply_text("–ù–µ–º–∞—î –º–µ–º—ñ–≤ —É –ø–∞–ø—Ü—ñ.")

    elif text == "‚ö°Ô∏è –ù–µ –∂–¥–∏ ‚Äî –¥—ñ–π!":
        await update.message.reply_text(random.choice(actions))

    elif text == "üí¨ –ù–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –¥–ª—è –¥—É—à—ñ":
        await update.message.reply_text(random.choice(affirmations))

    elif text == "ü§ù –ó–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤‚Äô—è–∑–æ–∫":
        await update.message.reply_text("–ù–∞–¥—ñ—à–ª–∏ –±—É–¥—å-—è–∫–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —ñ —è –ø–µ—Ä–µ–¥–∞–º –π–æ–≥–æ –¥–∞–ª—ñ!")

    else:
        await update.message.reply_text("–î—è–∫—É—é! –¢–≤–æ—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ—Ç—Ä–∏–º–∞–Ω–æ ‚úÖ")

def main():
    app = Application.builder().token(BOT_TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))
    app.run_polling()

if __name__ == "__main__":
    main()
